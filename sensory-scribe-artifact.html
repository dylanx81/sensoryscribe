<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sensory Scribe - Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/recharts@2.8.0/esm/index.js" type="module"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {}
            }
        }
    </script>
    <style>
        body {
            background-color: #111827;
            color: #f3f4f6;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-900 text-gray-100">
    <!-- Header -->
    <header class="border-b border-gray-800 p-6">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-2xl font-bold text-white">Sensory Scribe</h1>
            <p class="text-gray-400 mt-1">Analyze and improve sensory details in your fiction writing</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto p-6">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-[calc(100vh-200px)]">
            <!-- Left Panel - Input -->
            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-white">Input Panel</h2>
                <form id="analysisForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Your Text</label>
                        <textarea 
                            id="textInput"
                            class="w-full h-64 p-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                            placeholder="Paste your fiction text here for sensory analysis..."
                            required></textarea>
                        <p class="text-xs text-gray-400 mt-1">
                            <span id="charCount">0</span> characters
                        </p>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Genre</label>
                            <select id="genreSelect" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select Genre</option>
                                <option value="Romance">Romance</option>
                                <option value="Thriller">Thriller</option>
                                <option value="Fantasy">Fantasy</option>
                                <option value="Horror">Horror</option>
                                <option value="Literary Fiction">Literary Fiction</option>
                                <option value="Mystery">Mystery</option>
                                <option value="Science Fiction">Science Fiction</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Focus Sense</label>
                            <select id="senseSelect" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="All Senses">All Senses</option>
                                <option value="Sight">Sight</option>
                                <option value="Sound">Sound</option>
                                <option value="Touch">Touch</option>
                                <option value="Taste">Taste</option>
                                <option value="Smell">Smell</option>
                            </select>
                        </div>
                    </div>
                    
                    <button 
                        type="submit"
                        id="analyzeBtn"
                        class="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors">
                        Analyze Sensory Details
                    </button>
                </form>
            </div>

            <!-- Right Panel - Results -->
            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-white">Analysis Results</h2>
                
                <!-- Error State -->
                <div id="errorState" class="bg-red-900 border border-red-700 rounded-lg p-4 mb-6 hidden">
                    <div class="flex items-center">
                        <div class="text-red-400 mr-2">‚ö†Ô∏è</div>
                        <div>
                            <h3 class="font-semibold text-red-300">Error</h3>
                            <p class="text-red-200 text-sm" id="errorMessage"></p>
                        </div>
                    </div>
                </div>
                
                <!-- Radar Chart -->
                <div class="mb-6">
                    <div id="radarPlaceholder" class="bg-gray-700 rounded-lg p-4 h-64 flex items-center justify-center">
                        <div class="text-center text-gray-400">
                            <div class="w-16 h-16 mx-auto mb-2 bg-gray-600 rounded-full flex items-center justify-center text-2xl">üìä</div>
                            <p>Sensory Radar Chart</p>
                            <p class="text-sm">Results will appear here</p>
                        </div>
                    </div>
                    
                    <div id="radarChart" class="bg-gray-700 rounded-lg p-4 h-64 hidden">
                        <canvas id="radarCanvas" width="400" height="200"></canvas>
                        <div id="scoreGrid" class="mt-4 grid grid-cols-5 gap-2 text-xs"></div>
                    </div>
                </div>
                
                <!-- Feedback Panel -->
                <div class="bg-gray-700 rounded-lg p-4">
                    <h3 class="font-semibold mb-2 text-white">AI Feedback</h3>
                    
                    <div id="feedbackLoading" class="space-y-2 hidden">
                        <div class="animate-pulse bg-gray-600 h-4 rounded"></div>
                        <div class="animate-pulse bg-gray-600 h-4 rounded w-3/4"></div>
                        <div class="animate-pulse bg-gray-600 h-4 rounded w-1/2"></div>
                    </div>
                    
                    <div id="feedbackPlaceholder" class="text-gray-400 text-sm">
                        <p>Submit your text to receive personalized suggestions for improving sensory details in your writing.</p>
                    </div>
                    
                    <div id="feedbackContent" class="text-gray-200 text-sm leading-relaxed hidden"></div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Demo data for different genres
        const demoAnalyses = {
            "Romance": {
                radar_scores: { sight: 7, sound: 5, touch: 9, taste: 6, smell: 8 },
                feedback: "Your romance writing shows excellent tactile and olfactory details that enhance intimacy. Consider adding more auditory elements like whispered conversations or heartbeats to deepen emotional connection. The visual descriptions are good but could benefit from more specific details about characters' expressions and body language."
            },
            "Thriller": {
                radar_scores: { sight: 8, sound: 9, touch: 6, taste: 3, smell: 7 },
                feedback: "Strong use of visual and auditory cues creates excellent tension. The sounds of footsteps, creaking, and sudden noises effectively build suspense. Consider adding more tactile sensations like cold sweat, racing pulse, or rough textures to intensify the physical experience of fear."
            },
            "Fantasy": {
                radar_scores: { sight: 9, sound: 7, touch: 5, taste: 8, smell: 6 },
                feedback: "Excellent visual worldbuilding with vivid descriptions of magical elements. The taste descriptions of exotic foods and potions add authenticity. Enhance the fantasy atmosphere by incorporating more tactile sensations of magical energy, different textures of mythical creatures, and temperature changes."
            },
            "Horror": {
                radar_scores: { sight: 8, sound: 8, touch: 7, taste: 4, smell: 9 },
                feedback: "Outstanding use of smell to create atmosphere - decay, mustiness, and metallic scents effectively build dread. Visual and auditory elements work well together. Consider adding more taste-related horror elements like the metallic taste of fear or bitter aftertastes to complete the sensory nightmare."
            },
            "Literary Fiction": {
                radar_scores: { sight: 6, sound: 7, touch: 8, taste: 7, smell: 6 },
                feedback: "Well-balanced sensory approach that serves character development. The tactile descriptions effectively convey emotional states. Your use of taste and sound creates meaningful metaphors. Consider strengthening visual imagery to create more vivid scenes that reflect internal character journeys."
            },
            "Mystery": {
                radar_scores: { sight: 7, sound: 6, touch: 5, taste: 6, smell: 8 },
                feedback: "Good use of smell for clues and atmosphere - cigarette smoke, perfume, and musty odors add investigative depth. Visual details support the mystery well. Enhance the detective experience by adding more tactile clues like texture of paper, temperature of objects, or physical sensations during discovery moments."
            },
            "Science Fiction": {
                radar_scores: { sight: 9, sound: 8, touch: 6, taste: 7, smell: 5 },
                feedback: "Excellent futuristic visual descriptions create immersive alien worlds. Technological sounds enhance the sci-fi atmosphere. Consider developing more unique smells for alien environments and advanced tactile sensations from futuristic materials or energy fields to complete the otherworldly experience."
            }
        };

        // Character counter
        const textInput = document.getElementById('textInput');
        const charCount = document.getElementById('charCount');
        
        textInput.addEventListener('input', function() {
            charCount.textContent = this.value.length;
        });

        // Form submission
        document.getElementById('analysisForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const text = textInput.value.trim();
            const genre = document.getElementById('genreSelect').value;
            const sense = document.getElementById('senseSelect').value;
            
            if (!text || !genre) {
                showError('Please enter text and select a genre.');
                return;
            }
            
            if (text.length < 50) {
                showError('Please enter at least 50 characters for analysis.');
                return;
            }
            
            analyzeText(text, genre, sense);
        });

        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
            document.getElementById('errorState').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('errorState').classList.add('hidden');
            }, 5000);
        }

        function analyzeText(text, genre, sense) {
            // Show loading state
            document.getElementById('feedbackPlaceholder').classList.add('hidden');
            document.getElementById('feedbackContent').classList.add('hidden');
            document.getElementById('feedbackLoading').classList.remove('hidden');
            document.getElementById('analyzeBtn').disabled = true;
            document.getElementById('analyzeBtn').textContent = 'Analyzing...';
            
            // Simulate API delay
            setTimeout(() => {
                const analysis = demoAnalyses[genre] || demoAnalyses["Literary Fiction"];
                
                // Show results
                showResults(analysis);
                
                // Reset button
                document.getElementById('analyzeBtn').disabled = false;
                document.getElementById('analyzeBtn').textContent = 'Analyze Sensory Details';
                document.getElementById('feedbackLoading').classList.add('hidden');
            }, 2000);
        }

        function showResults(analysis) {
            // Show radar chart
            document.getElementById('radarPlaceholder').classList.add('hidden');
            document.getElementById('radarChart').classList.remove('hidden');
            
            // Draw simple radar chart
            drawRadarChart(analysis.radar_scores);
            
            // Show feedback
            document.getElementById('feedbackContent').textContent = analysis.feedback;
            document.getElementById('feedbackContent').classList.remove('hidden');
            
            // Show score grid
            showScoreGrid(analysis.radar_scores);
        }

        function drawRadarChart(scores) {
            const canvas = document.getElementById('radarCanvas');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 80;
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw grid
            ctx.strokeStyle = '#4b5563';
            ctx.lineWidth = 1;
            
            for (let i = 1; i <= 5; i++) {
                ctx.beginPath();
                ctx.arc(centerX, centerY, (radius / 5) * i, 0, 2 * Math.PI);
                ctx.stroke();
            }
            
            // Draw axes
            const senses = ['sight', 'sound', 'touch', 'taste', 'smell'];
            const angles = senses.map((_, i) => (i * 2 * Math.PI) / 5 - Math.PI / 2);
            
            ctx.strokeStyle = '#4b5563';
            angles.forEach(angle => {
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(
                    centerX + Math.cos(angle) * radius,
                    centerY + Math.sin(angle) * radius
                );
                ctx.stroke();
            });
            
            // Draw data
            ctx.strokeStyle = '#3b82f6';
            ctx.fillStyle = 'rgba(59, 130, 246, 0.3)';
            ctx.lineWidth = 2;
            
            ctx.beginPath();
            angles.forEach((angle, i) => {
                const sense = senses[i];
                const value = scores[sense] / 10;
                const x = centerX + Math.cos(angle) * radius * value;
                const y = centerY + Math.sin(angle) * radius * value;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Draw labels
            ctx.fillStyle = '#d1d5db';
            ctx.font = '12px sans-serif';
            ctx.textAlign = 'center';
            
            angles.forEach((angle, i) => {
                const sense = senses[i];
                const labelX = centerX + Math.cos(angle) * (radius + 20);
                const labelY = centerY + Math.sin(angle) * (radius + 20);
                
                ctx.fillText(sense.charAt(0).toUpperCase() + sense.slice(1), labelX, labelY);
            });
        }

        function showScoreGrid(scores) {
            const grid = document.getElementById('scoreGrid');
            grid.innerHTML = '';
            
            Object.entries(scores).forEach(([sense, score]) => {
                const div = document.createElement('div');
                div.className = 'text-center';
                div.innerHTML = `
                    <div class="text-gray-300">${sense.charAt(0).toUpperCase() + sense.slice(1)}</div>
                    <div class="text-blue-400 font-semibold">${score}/10</div>
                `;
                grid.appendChild(div);
            });
        }

        // Add demo notice
        const header = document.querySelector('header div');
        const demoNotice = document.createElement('div');
        demoNotice.className = 'bg-blue-900 border border-blue-700 rounded-lg p-3 mt-4';
        demoNotice.innerHTML = `
            <div class="flex items-center">
                <div class="text-blue-400 mr-2">‚ÑπÔ∏è</div>
                <div>
                    <h3 class="font-semibold text-blue-300">Demo Version</h3>
                    <p class="text-blue-200 text-sm">This is a demo with simulated analysis results. The full version uses Claude AI for real analysis.</p>
                </div>
            </div>
        `;
        header.appendChild(demoNotice);
    </script>
</body>
</html>